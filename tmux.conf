# This file should be at ~/.tmux.conf, or symlinked there
# =======================================================

# Make it use C-a, similar to screen..
unbind C-b
unbind l
set -g prefix C-a
bind-key C-a last-window


# C-c: save into system clipboard (+). With preselection.
bind C-c choose-buffer "run \"tmux save-buffer -b %% - | xclip -i -sel clipboard\" \; run \" tmux display \\\"Clipboard \(+\) filled with: $(tmux save-buffer -b %1 - | dd ibs=1 obs=1 status=noxfer count=80 2> /dev/null)... \\\" \" "
# C-v: copy from + clipboard.
bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer" \; run "tmux display \"Copied from \(+\) $(xclip -o -sel clipboard | dd ibs=1 obs=1 status=noxfer count=80 2> /dev/null)... \""
# C-d: save into selection clipboard (*). With preselection.
bind C-d choose-buffer "run \"tmux save-buffer -b %% - | xclip -i\" \; run \" tmux display \\\"Clipboard \(*\) filled with: $(tmux save-buffer -b %1 - | dd ibs=1 obs=1 status=noxfer count=80 2> /dev/null)... \\\" \" "
# C-f: copy from * clipboard.
bind C-f run "tmux set-buffer \"$(xclip -o)\"; tmux paste-buffer" \; run "tmux display \"Copied from \(*\) $(xclip -o | dd ibs=1 obs=1 status=noxfer count=80 2> /dev/null)... \""

# nested sessions
bind-key a send-prefix

#Change window/pane killing behavior
unbind &
bind K confirm "unlink-window -k"
unbind x
bind k confirm kill-pane

#Open pane with man pages
bind m command-prompt -p "man:" "split-window -h -p 35 'exec man %%'"

#Print this command (ideally to a terminal) - set's default path to pwd
bind e send-keys " tmux set default-path $(pwd)" \; send-keys Enter

# set vi keys
unbind [
bind Escape copy-mode
setw -g mode-keys vi

# pane movement
bind-key j command-prompt -p "join pane (-) from:"  "join-pane -s '%%'"
bind-key s command-prompt -p "send pane (-) to:"  "join-pane -t '%%'"
bind-key J command-prompt -p "join pane (|) from:"  "join-pane -h -s '%%'"
bind-key S command-prompt -p "send pane (|) to:"  "join-pane -h -t '%%'"

# Reload key
bind r source-file ~/.tmux.conf; display-message "Config reloaded..."

# Count from 1
set -g base-index 1
set -g pane-base-index 1

# Window splitting
unbind %
bind | split-window -h
unbind '"'
bind - split-window -v
set -g display-panes-time 2000

set -g default-terminal "screen-256color"
set -g history-limit 10000
set status-interval 30

# THEME
set -g status-bg cyan
set -g status-fg black
set -g status-left '#[fg=black]#H|#S'
set -g status-left-length 23
set -g status-justify centre
set-window-option -g window-status-current-fg black
set-window-option -g window-status-current-attr reverse
set -g status-right '#[fg=black]#(uptime | cut -d "," -f 3) | #(date +%R)'
setw -g monitor-activity on
set -g visual-activity on
set -g pane-active-border-fg colour15

# Remove escape key delay
set -sg escape-time 0

# Mouse pane resizing
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on
